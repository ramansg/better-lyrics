@import url("https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap");

// default | light | dark
$theme: default;

// Background
$background: dynamic; // dynamic | any color | or custom image using "url('yourimage.url.here')"
$bg-brightness: null; // null = use preset unless user provides a value
$bg-blur: 0.6;
$bg-saturate: 1.5;
$bg-scale: 1.4;
$player-page-opacity: 1;
$bg-fade: on; // fade transition when song switches

// Layout | null = use preset unless user provides a value
$font: "Inter"; // "font1", "font2"
$font-weight: 400;
$text-color-1: white; // primary
$text-color-2: rgba(white, 0.7); //secondary
$accent: white;
$accent-hover: mix($accent, white, 70%);
$icon: white;

$layout-color: null;
$layout-contrast: null;
$layout-hover: null;
$button-color: null;
$button-hover: null;
$layout-blur: 10px;
$layout-border: transparent; // thickness style color
$button-border: transparent; // thickness style color
$drop-shadow: 0 4px 16px rgba(0, 0, 0, 0.2); // x-offset y-offset blur-radius color

// Music
$playback-controls-centered: off;
$show-skip-buttons: on;
$lyrics-font-weight: 500;
$lyrics-font-size: 30px;
$album-art-size: 400px;
$small-video: off; // revert back to small video in player page
$unified-artists-lines: off; // use one text alignment for all singers

// Animations
$lyric-scroll-duration: 0.5s;
$lyric-scroll-timing: ease-in-out;
$no-lyrics-slide-delay: 1.8s;

// Art & Selection
$small-art-radius: 8px;
$big-art-radius: 24px;
$select-radius: 8px;
$big-select-radius: 12px;

// Presets
$theme-presets: (
  default: (
    bg-brightness: 0.7,
    layout-color: transparent,
    layout-contrast: rgba(255, 255, 255, .1),
    layout-hover: rgba(255, 255, 255, .1),
    button-color: rgba(255, 255, 255, .1),
    button-hover: rgba(255, 255, 255, .2)
  ),
  dark: (
    bg-brightness: 0.5,
    layout-color: rgba(0, 0, 0, .2),
    layout-contrast: rgba(255, 255, 255, .1),
    layout-hover: rgba(255, 255, 255, .1),
    button-color: rgba(255, 255, 255, .1),
    button-hover: rgba(255, 255, 255, .2)
  ),
  light: (
    bg-brightness: 0.8,
    layout-color: rgba(255, 255, 255, .07),
    layout-contrast: rgba(255, 255, 255, .15),
    layout-hover: rgba(255, 255, 255, .15),
    button-color: rgba(255, 255, 255, .15),
    button-hover: rgba(255, 255, 255, .25)
  )
);

$theme-map: map-get($theme-presets, $theme);
$final-bg-brightness: if($bg-brightness != null, $bg-brightness, map-get($theme-map, bg-brightness));

/* ==================================================== */
html {
  scrollbar-width: none;
}

* {
  font-family: $font !important;
  font-weight: $font-weight !important;
  scrollbar-width: none;
}

:root {
  --album-art-size: $album-art-size;
  --bg-scale: $bg-scale;
  --bg-blur: calc($bg-blur * 100px);
  --bg-brightness: if($final-bg-brightness != null, $final-bg-brightness, 0.7);
  --bg-saturate: $bg-saturate;
  --player-page-opacity: $player-page-opacity;

  --text-color-1: $text-color-1;
  --text-color-2: $text-color-2;
  --accent: $accent;
  --accent-hover: $accent-hover;
  --icon: $icon;

  --layout-color: if($layout-color != null, $layout-color, map-get($theme-map, layout-color));
  --layout-contrast: if($layout-contrast != null, $layout-contrast, map-get($theme-map, layout-contrast));
  --layout-hover: if($layout-hover != null, $layout-hover, map-get($theme-map, layout-hover));
  --button-color: if($button-color != null, $button-color, map-get($theme-map, button-color));
  --button-hover: if($button-hover != null, $button-hover, map-get($theme-map, button-hover));
  --layout-blur: $layout-blur;
  --layout-border: $layout-border;
  --button-border: $button-border;
  --drop-shadow: $drop-shadow;

  --select-radius: $select-radius;
  --big-select-radius: $big-select-radius;
  --big-art-radius: $big-art-radius;
  --small-art-radius: $small-art-radius;

  --no-lyrics-slide-delay: $no-lyrics-slide-delay;
  --blyrics-lyric-scroll-duration: $lyric-scroll-duration;
  --blyrics-lyric-scroll-timing-function: $lyric-scroll-timing;

  --ytmusic-text-primary: $text-color-1;
  --ytmusic-overlay-text-secondary: $text-color-2;
}

/* ==========================Text & Icons========================== */
yt-formatted-string.title {
  color: var(--text-color-1) !important;
  --yt-endpoint-color: var(--text-color-1) !important;
  --yt-endpoint-hover-color: var(--text-color-1) !important;
  --yt-endpoint-visited-color: var(--text-color-1) !important;
}

yt-icon {
  color: var(--icon);
}

yt-icon.ytmusic-inline-badge-renderer {
  color: var(--accent);
}

/* Icons in explore top songs  */
.icon-column.ytmusic-custom-index-column-renderer .yt-icon-shape {
  color: var(--icon);
}

.icon.ytmusic-play-button-renderer {
  --ytmusic-play-button-guide-icon-color: var(--icon);
  color: var(--icon);

}

/* CTA Text */
a.yt-simple-endpoint.yt-formatted-string {
  --yt-spec-call-to-action: var(--accent);
  --yt-endpoint-hover-color: var(--accent-hover);
  &:hover {
    text-decoration: underline;
  }
}

/* Like Dislike 3 Dots */
.yt-spec-button-shape-next--mono.yt-spec-button-shape-next--text {
  color: var(--icon);
}

/* Like buttons pressed */
.yt-spec-button-shape-next[aria-pressed="true"] {
  color: var(--accent);
}

.index.ytmusic-responsive-list-item-renderer {
  color: var(--text-color-2);
}

tp-yt-paper-ripple.tp-yt-paper-tab {
  color: transparent;
}

.stroke.yt-interaction,
.fill.yt-interaction {
  border: 0;
  background: transparent;
}

/* ==========================Art========================== */
/* Background Behind Art */
ytmusic-player {
  background: transparent;
}

ytmusic-background-overlay-renderer {
  background: linear-gradient(rgba(0, 0, 0, 0.5), transparent 80%);
}

ytmusic-responsive-list-item-renderer[is-album-detail-page] ytmusic-background-overlay-renderer {
  background: transparent;
}

/* Playing/Selected Overlay */
ytmusic-responsive-list-item-renderer[play-button-state] {
  border-radius: var(--small-art-radius);
  transition: background-color 0.5s ease-in-out;
}

/* Playlist Page Art */
ytmusic-responsive-header-renderer[is-web-delhi-icons-enabled] {
  --yt-img-border-radius: var(--big-art-radius);
}

#header-group #img {
  border-radius: 50%;
}

/* Small Art */
yt-img-shadow[object-fit="CONTAIN"] img,
ytmusic-player[player-ui-state=PLAYER_BAR_ONLY] #img,
.thumbnail-overlay {
  border-radius: var(--small-art-radius);
  object-fit: cover !important;
  overflow: hidden;
}

/* Player Page Art */
ytmusic-player[player-page-open] .player-wrapper,
ytmusic-two-row-item-renderer .image-wrapper {
  border-radius: var(--big-art-radius) !important;
}

#player:not([player-ui-state="PLAYER_BAR_ONLY"]) {
  border-radius: var(--big-art-radius);
  box-shadow: var(--drop-shadow) !important;
  overflow: hidden;
}

ytmusic-player[player-ui-state] #song-media-window {
  background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0) 40%);
  border-radius: var(--big-art-radius);
}

ytmusic-player[player-ui-state="PLAYER_BAR_ONLY"] {
  .html5-video-player,
  .video-stream {
    background: transparent;
    border-radius: 12px;
  }
}

.html5-video-player {
  width: 200%;
  height: 200%;
  transform: scale(50%) translate(-50%, -50%);
}

@media (min-width: 615px) {
  ytmusic-player-page:not([video-mode]):not([player-fullscreened]):not([blyrics-dfs]):not([player-ui-state="MINIPLAYER"]) #player {
    max-width: var(--album-art-size) !important;
  }
}

/* ==========================Background========================== */
#browse-page::before,
#search-page::before {
  content: "";
  position: fixed;
  inset: 0;
  height: 120vh;
  background: if($background == dynamic, var(--blyrics-background-img), $background);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  transform: scale(var(--bg-scale));
  z-index: -50;
  filter: blur(var(--bg-blur)) saturate(var(--bg-saturate)) brightness(var(--bg-brightness));
}

@if $bg-fade == on {
  #browse-page::before,
  #search-page::before,
  ytmusic-player-page::before,
  ytmusic-player-page[is-mweb-modernization-enabled] #main-panel::before {
    transition: background 0.3s ease-in;
    will-change: background;
  }
}

/* Background Fix */
.background-gradient {
  background: none !important;
}

ytmusic-fullbleed-thumbnail-renderer[is-background] .image {
  mask-image: linear-gradient(transparent);
}

@media (min-width: 615px) {
  ytmusic-player-page {
    background: none;
  }

  ytmusic-player-page::before {
    background: if($background == default, var(--blyrics-background-img), $background);
    filter: blur(var(--bg-blur)) saturate(var(--bg-saturate)) brightness(var(--bg-brightness));
    transform: scale(var(--bg-scale));
    opacity: var(--player-page-opacity);
  }
}

/* Transparent Player Page */
ytmusic-player-page:not([is-mweb-modernization-enabled]) {
  background: none !important;
  backdrop-filter: blur(15px);
}

ytmusic-app-layout[player-page-open]:not([is-mweb-modernization-enabled]) > #content {
  visibility: visible !important;
}

ytmusic-app-layout[player-fullscreened] > [slot=content] {
  display: block;
}

ytmusic-app-layout[player-page-open] #browse-page::before {
  animation-play-state: paused;
}

/* ==========================Homepage========================== */
ytmusic-app-layout > [slot=player-bar] {
  width: 100vw;
}

/* Title */
.strapline.ytmusic-shelf-renderer,
.ytmusicCardShelfHeaderBasicRendererStrapline,
.strapline.ytmusic-carousel-shelf-basic-header-renderer {
  color: var(--accent);
}

/* Nav Bar */
#nav-bar-background.ytmusic-app-layout,
ytmusic-app-layout.content-scrolled #nav-bar-divider {
  opacity: 1;
  backdrop-filter: blur(var(--layout-blur));
  background: var(--layout-color);
  border-bottom: var(--layout-border) !important;
  border-top: 0 !important;
}

ytmusic-app-layout[is-bauhaus-sidenav-enabled].content-scrolled,
ytmusic-app-layout[is-bauhaus-sidenav-enabled][player-page-open] {
  #mini-guide-background.ytmusic-app-layout {
    opacity: 0;
  }
}

/* Drawer */
ytmusic-app[is-bauhaus-sidenav-enabled] #guide-wrapper.ytmusic-app {
  background: var(--layout-color);
  padding: 2px;
  border-right: var(--layout-border);
  backdrop-filter: blur(var(--layout-blur));
}

#layout[player-page-open] {
  #guide-wrapper {
    background: var(--layout-color) !important;
    border-right: var(--layout-border) !important;
  }
  #nav-bar-background {
    background: var(--layout-color) !important;
    border-bottom: var(--layout-border) !important;
  }
}

tp-yt-paper-item.ytmusic-guide-entry-renderer:hover {
  background: var(--layout-hover);
}

#divider {
  border: 0 !important;
}

/*Drawer hover play button */
ytmusic-guide-entry-renderer #play-button.ytmusic-guide-entry-renderer {
  background: transparent !important;
}

ytmusic-guide-entry-renderer .content-wrapper.ytmusic-play-button-renderer {
  background: transparent;
  &:hover {
    transform: scale(1.3);
  }
}

/* New Playlist Button */
.yt-spec-button-shape-next--mono.yt-spec-button-shape-next--tonal {
  background: var(--button-color);
  border: var(--button-border);
  color: var(--accent);
  &:hover {
    background: var(--button-hover);
    border: var(--button-border);
  }
}

/* Search Box */
ytmusic-search-box .search-box {
  border-radius: 12px !important;
  background: var(--layout-contrast) !important;
  border: var(--layout-border) !important;
}

input.ytmusic-search-box {
  color: var(--text-color-2);
}

ytmusic-search-box[has-query] input.ytmusic-search-box,
ytmusic-search-box[opened] input.ytmusic-search-box {
  color: var(--text-color-1);
  &::placeholder {
    color: var(--text-color-1);
  }
}

.search-container.ytmusic-search-box {
  border-radius: 12px;
}

ytmusic-search-box[has-query] .search-container.ytmusic-search-box,
ytmusic-search-box[opened] .search-container.ytmusic-search-box {
  border-radius: 12px;
  background: transparent !important;
  box-shadow: var(--drop-shadow);
}

ytmusic-search-box #suggestion-list {
  top: 0;
  opacity: 0;
  visibility: hidden;
  display: initial !important;
  border-radius: 12px !important;
  background: var(--layout-color) !important;
  box-shadow: var(--drop-shadow);
  border: var(--layout-border) !important;
  backdrop-filter: blur(var(--layout-blur)) !important;

  ytmusic-search-suggestions-section {
    background: transparent !important;

    ytmusic-search-suggestion {
      background: transparent !important;
      color: var(--text-color-1);
      border-radius: 12px;
      &:hover {
        background: var(--layout-hover) !important;
        color: var(--text-color-1);
      }
    }
  }
}

ytmusic-search-box[opened] #suggestion-list {
  top: calc(var(--ytmusic-search-box-height) + 16px) !important;
  opacity: 1;
  visibility: visible;
}

#suggestions .ytmusic-search-suggestions-section {
  border-radius: var(--select-radius);
}

/* Carousel Buttons */
yt-icon-button.ytmusic-carousel-shelf-renderer,
.yt-spec-button-shape-next--mono.yt-spec-button-shape-next--outline {
  background: var(--button-color);
  border: var(--button-border);
  color: var(--text-color-1);
  &:hover {
    background: var(--button-hover);
  }
}

/* ==========================Search Page========================== */
/* Tab Below Search */
.tab-container.ytmusic-tabs {
  box-shadow: none !important;
  background: transparent;
  border-bottom: 0;
}

.tab.selected.ytmusic-tabs {
  color: var(--accent);
  border-bottom: 1px solid var(--accent);
}

/* Transition */
#tabs.ytmusic-tabbed-search-results-renderer {
  transition: background 0.3s ease-out, backdrop-filter 0.3s ease-out;
}

/* When Scrolled */
ytmusic-tabs.stuck {
  box-shadow: none !important;
  background: var(--layout-color);
  backdrop-filter: blur(var(--layout-blur));
  transition: background 0.3s ease-in, backdrop-filter 0.3s ease-in;
}

/* Search Card */
yt-formatted-string.text.style-scope.ytmusic-message-renderer {
  margin-top: 0px !important;
}

.immersive-background.ytmusic-card-shelf-renderer::before {
  background: transparent;
}

.undercards-container.ytmusic-card-shelf-renderer::before,
.card-content-container.ytmusic-card-shelf-renderer::before {
  background: var(--layout-color);
  border: var(--layout-border);
  backdrop-filter: blur(var(--layout-blur));
  border-radius: 24px;
}

.undercards-container.ytmusic-card-shelf-renderer {
  padding: 20px;
  gap: 16px;
}

.thumbnail-container.ytmusic-card-shelf-renderer {
  border-radius: var(--big-art-radius);
}

/* Divider */
ytmusic-responsive-list-item-renderer.ytmusic-shelf-renderer,
.ytmusic-playlist-shelf-renderer {
  border-bottom: 0 !important;
}

ytmusic-message-renderer {
  .text.ytmusic-message-renderer {
    color: var(--text-color-1) !important;
  }
  .yt-icon-shape {
    color: var(--icon);
  }
}

/* ==========================Player Page========================== */
ytmusic-player-page {
  transition: transform 0.65s cubic-bezier(.3, .6, .5, 1) !important;
}

ytmusic-app-layout:not([player-page-open]):not([is-mweb-player-bar-modernization-enabled]) > [slot=player-page] {
  transform: translate3d(0, 130vh,0);
}

ytmusic-app-layout[player-page-open][is-mweb-player-bar-modernization-enabled] > [slot=player-page] {
  animation: open-playerpage .65s cubic-bezier(.3, .6, .5, 1);
}

ytmusic-app-layout:not([player-page-open])[is-mweb-player-bar-modernization-enabled] > [slot=player-page] {
  animation: collapse-playerpage .65s cubic-bezier(.3, .6, .5, 1);
}

@keyframes open-playerpage {
  0% {
    transform: translateY(100%);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}
@keyframes collapse-playerpage {
  0% {
    transform: translateY(0);
  }
  38% {
    opacity: 1;
  }
  100% {
    transform: translateY(120vh);
    opacity: 0;
  }
}

/* Player Page Background Re-position */
ytmusic-app-layout:not([is-mweb-modernization-enabled]) > [slot=player-page] {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  box-sizing: border-box;
  padding-top: var(--ytmusic-nav-bar-height);
  padding-left: var(--ytmusic-guide-width);
  padding-bottom: var(--ytmusic-player-bar-height);
}

ytmusic-app-layout[player-fullscreened] > [slot=player-page] {
  padding-bottom: 0;
}

ytmusic-player[player-ui-state=MINIPLAYER] {
  bottom: calc(130vh + var(--ytmusic-mini-player-spacing) + var(--ytmusic-player-bar-height)) !important;
}

ytmusic-player[player-ui-state=FULLSCREEN]:not([player-page-open]) {
  top: calc(var(--ytmusic-nav-bar-height) * -1);
}

/* Tab */
tp-yt-paper-tab.ytmusic-player-page {
  color: var(--text-color-1);
}

tp-yt-paper-tab.iron-selected.ytmusic-player-page {
  color: var(--accent);
}

.selection-bar.tp-yt-paper-tabs {
  border-bottom: 1px solid var(--accent);
}

/* Queue */
ytmusic-player-queue-item {
  --ytmusic-player-queue-item-thumbnail-size: 42px !important;
  --ytmusic-list-item-height: 58px;
  border-radius: var(--select-radius);
  border: 0;
  opacity: 0.825;
  &:not(:last-child) {
    margin-bottom: 8px;
  }
  &:hover {
    background: rgba(255, 255, 255, 0.05);
    opacity: 1;
  }
}

.song-title.ytmusic-player-queue-item,
.subtitle.ytmusic-queue-header-renderer {
  color: var(--text-color-1);
}

.byline.ytmusic-player-queue-item {
  color: var(--text-color-2);
}

/* Small Buttons */
#chips a.yt-simple-endpoint.ytmusic-chip-cloud-chip-renderer  {
  background: var(--button-color);
  color: var(--text-color-1);
  &:hover {
    background: var(--button-hover);
  }
}

ytmusic-chip-cloud-chip-renderer[is-selected] a.ytmusic-chip-cloud-chip-renderer {
  background: var(--button-hover) !important;
  color: var(--accent) !important;
  &:focus {
    background: var(--button-hover);
  }
}

.yt-simple-endpoint.ytmusic-chip-cloud-chip-renderer[title="Save"] {
  background: var(--button-color);
  color: var(--accent);
  .yt-icon-shape {
    color: var(--accent);
  }
  &:hover {
    background: var(--button-hover);
  }
}

/* Audio-Video Toggle */
.av-toggle.ytmusic-av-toggle {
  background: var(--button-color);
  border: var(--button-border);
}

.song-button.ytmusic-av-toggle,
.video-button.ytmusic-av-toggle {
  background: transparent;
  color: var(--text-color-1);
}

.description.ytmusic-description-shelf-renderer {
  color: var(--text-color-1);
}

ytmusic-tab-renderer.ytmusic-player-page {
  margin-right: -10px;
}

/* ==========================Player Bar========================== */
ytmusic-player-bar {
  background: var(--layout-color);
  backdrop-filter: blur(var(--layout-blur));
}

#player-bar-background {
  backdrop-filter: none;
}

ytmusic-player-bar.ytmusic-app {
  transition: background 0.3s ease, bottom .5s;
}

#layout[player-ui-state="PLAYER_PAGE_OPEN"] ytmusic-player-bar, #layout[player-ui-state="PLAYER_PAGE_OPEN"] #player-bar-background {
  background: transparent !important;
}

/* Progress Bar */
#primaryProgress.tp-yt-paper-progress {
  --paper-progress-active-color: var(--accent);
}

#progress-bar[focused],
ytmusic-player-bar:hover #progress-bar {
  --paper-slider-knob-color: var(--accent) !important;
  --paper-slider-knob-start-color: var(--accent) !important;
  --paper-slider-knob-start-border-color: var(--accent) !important;
}

#progress-bar.ytmusic-player-controls {
  --paper-slider-knob-color: var(--accent);
  --paper-slider-active-color: var(--accent);
}

#hover-time-info.ytmusic-player-bar {
  padding: 12px;
  border-radius: 12px;
  background: var(--layout-contrast);
  color: var(--text-color-1);
  backdrop-filter: blur(var(--layout-blur));
  border: var(--layout-border);
}

/* Song Info */
.content-info-wrapper.ytmusic-player-bar .byline.ytmusic-player-bar {
  color: var(--accent);
  --yt-endpoint-color: var(--accent);
  --yt-endpoint-visited-color: var(--accent);
  --yt-endpoint-hover-color: var(--accent-hover);
}

.thumbnail-image-wrapper.ytmusic-player-bar,
.image.ytmusic-player-bar {
  display: block;
  border-radius: var(--small-art-radius);
}

.time-info.ytmusic-player-bar,
.duration.ytmusic-player-queue-item {
  color: var(--text-color-2);
}

/* Volume Control */
ytmusic-app {
  --ytmusic-player-bar-background: transparent;
  .volume-slider.ytmusic-player-bar,
  .expand-volume-slider.ytmusic-player-bar {
    --paper-slider-knob-color: var(--accent);
    --paper-slider-knob-start-color: var(--accent);
    --paper-slider-knob-start-border-color: var(--accent);
    --paper-slider-container-color: transparent;
  }
}

/* Podcast Player Bar */
tp-yt-paper-listbox.ytmusic-playback-rate-popup-renderer {
  border: var(--layour-border);
  --paper-listbox-background-color: transparent;
}

tp-yt-paper-item.ytmusic-playback-rate-popup-renderer {
  --ytmusic-menu-item-hover-background-color: var(--layout-hover);
  color: var(--text-color-1);
  border-radius: var(--select-radius);
}

/* Icons */
.spinner-layer.tp-yt-paper-spinner-lite {
  color: var(--icon);
}

yt-icon-button:is([title="Repeat one"], [title="Repeat all"]) .yt-icon-shape {
  color: var(--accent);
}

ytmusic-player-bar[shuffle-on] {
  .shuffle yt-icon,
  .expand-shuffle yt-icon {
    color: var(--accent);
  }
}

ytmusic-player-bar:has(.volume-slider[value="0"]) {
  .volume yt-icon,
  .expand-volume yt-icon {
    color: var(--accent);
  }
}

/* Hide Expand Button When Expanded */
ytmusic-player-bar:has(ytmusic-player-expanding-menu[aria-hidden="false"]) .right-controls.ytmusic-player-bar .expand-button.ytmusic-player-bar {
  opacity: 0;
}

@if $show-skip-buttons == on {
  ytmusic-player-bar yt-icon-button[hidden],
  yt-icon-button.rewind-button {
    display: inline-flex !important;
  }
}

@if $playback-controls-centered == on {
  @media (min-width: 615px) {
    ytmusic-player-bar {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      grid-template-areas: "start middle end";
    }

    .left-controls.ytmusic-player-bar {
      grid-area: middle;
      justify-self: center;
      justify-content: center;
    }

    .middle-controls.ytmusic-player-bar {
      grid-area: start;
      justify-content: start;
      margin-left: 12px;
    }

    .time-info.ytmusic-player-bar {
      position: absolute;
      top: -18px;
      margin: 0px;
    }

    .spinner-container.ytmusic-player-bar {
      position: absolute;
      left: 0;
    }
  }
}

/* ==========================Dropdowns & Misc========================== */
/* New Playlist From Drawer */
ytmusic-playlist-form {
  background: transparent;
  .yt-icon-shape {
    color: var(--icon);
  }
}

.label.ytmusic-dropdown-item-renderer {
  color: var(--text-color-1);
}

tp-yt-iron-input.tp-yt-paper-input>input.tp-yt-paper-input {
  color: var(--text-color-1);
}

.yt-list-item-view-model__title {
  color: var(--text-color-1);
}

ytmusic-dialog {
  box-shadow: var(--drop-shadow);
  background: var(--layout-color);
  backdrop-filter: blur(var(--layout-blur));
  border: var(--layout-border);
  border-radius: 24px;
}

/* Underline */
.unfocused-line.tp-yt-paper-input-container {
  border-color: rgba(255, 255, 255, .4);
}

.focused-line.tp-yt-paper-input-container {
  border-color: var(--accent);
}

/* Toogle Button */
.ytSwitchShapeTrack {
  background: var(--button-color);
}

.ytSwitchShapeKnob {
  background: rgba(255, 255, 255, .3);
}

.ytSwitchShapeKnobActive {
  background: var(--accent);
}

/* Playlist Visibility Dropdown */
.dropdown-content.tp-yt-paper-menu-button {
  --yt-spec-brand-background-primary: transparent;
  background: var(--layout-color);
  box-shadow: var(--drop-shadow);
  backdrop-filter: blur(var(--layout-blur));
  border-radius: 24px;
}

.ytmusic-playlist-form .dropdown-content.tp-yt-paper-menu-button {
  left: 12rem
}

.dropdown-content.ytmusic-dropdown-renderer {
  background: transparent;
  backdrop-filter: blur(var(--layout-blur));
}

ytmusic-dropdown-item-renderer {
  background: transparent;
  &:hover,
  &:focus {
    background: var(--layout-hover);
  }
}

/* Item Pressed */
tp-yt-paper-item.ytmusic-dropdown-item-renderer:focus::before {
  background: transparent;
}

/* NOTENOTENOTE */
.icon.ytmusic-dropdown-item-renderer,
tp-yt-iron-icon.tp-yt-paper-dropdown-menu,
ytmusic-dropdown-renderer[dropdown-style=underline] .icon.ytmusic-dropdown-renderer {
  color: white;
}

/* Add to Playlist */
tp-yt-paper-dialog[modern],
ytmusic-add-to-playlist-renderer {
  --yt-spec-brand-background-primary: transparent;
  background: var(--layout-color);
  backdrop-filter: blur(var(--layout-blur));
  box-shadow: var(--drop-shadow);
  border-radius: 24px;
  border: var(--layout-border);
}

/* Divider */
.top-bar.ytmusic-add-to-playlist-renderer,
ytmusic-carousel-shelf-renderer.ytmusic-add-to-playlist-renderer:not(:empty) {
  border-bottom: 0;
}

/* Add to Option */
ytmusic-playlist-add-to-option-renderer {
  border-radius: var(--big-select-radius);
}

#title.ytmusic-playlist-add-to-option-renderer {
  color: var(--text-color-1);
}

.thumbnail.ytmusic-playlist-add-to-option-renderer {
  border-radius: var(--small-art-radius);
}

/* Divider */
.top-bar.ytmusic-add-to-playlist-renderer,
ytmusic-carousel-shelf-renderer.ytmusic-add-to-playlist-renderer:not(:empty) {
  border-bottom: 0;
}

/* 3 Dot Menu */
tp-yt-iron-dropdown.ytmusic-popup-container {
  background: var(--layout-color);
  backdrop-filter: blur(var(--layout-blur));
  border-radius: 24px;
  box-shadow: var(--drop-shadow);
  border: var(--layout-border);
  overflow: hidden;
}

tp-yt-paper-listbox.ytmusic-menu-popup-renderer {
  --paper-listbox-background-color: transparent;
  border: 0;
}

tp-yt-paper-listbox#items yt-formatted-string {
  color: var(--text-color-1);
}

.ytmusic-menu-popup-renderer {
  border-radius: var(--select-radius);
  overflow: hidden;
  --ytmusic-menu-item-hover-background-color: var(--layout-hover);
}

/* User Dropdown */
.ytmusicMultiPageMenuRendererHost {
  --yt-spec-call-to-action: var(--accent);
  --yt-endpoint-hover-color: var(--accent-hover);
  --yt-spec-outline: transparent;
  background: transparent;
}

ytd-simple-menu-header-renderer {
  background: transparent;
}

ytd-compact-link-renderer {
  --yt-compact-link-icon-color: var(--icon);
  border-radius: var(--select-radius);
  &:hover {
    background: var(--layout-hover) !important;
  }
}

tp-yt-paper-item:focus:before {
  border-radius: var(--select-radius);
}

ytd-account-item-renderer {
  --yt-spec-text-primary: var(--accent);
  border-radius: var(--big-select-radius);
}

#email.ytd-google-account-header-renderer {
  color: var(--text-color-2);
}

yt-formatted-string.ytd-account-item-renderer[secondary] {
  color: var(--text-color-2);
}

/* Settings */
ytmusic-setting-category-collection-renderer.ytmusic-settings-page {
  border-left: 1px solid rgba(255, 255, 255, 0.2);
}

.category-menu-item.iron-selected.ytmusic-settings-page,
.category-menu-item.ytmusic-settings-page:focus:not(.iron-selected) {
  background: var(--layout-hover);
  border-radius: var(--select-radius);
}

.dropdown-content.ytmusic-setting-single-option-menu-renderer {
  background: transparent;
}

/* Divider */
.top-bar.ytmusic-settings-page,
.items .ytmusic-setting-category-collection-renderer {
  border-bottom: 0 !important;
}

/* Toggle Buttons */
.toggle-bar.tp-yt-paper-toggle-button {
  background: rgba(255, 255, 255, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.1);
  opacity: 0.5;
}

.toggle-button.tp-yt-paper-toggle-button {
  background: rgb(180, 180, 180);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

tp-yt-paper-toggle-button[checked]:not([disabled]) {
  .toggle-bar.tp-yt-paper-toggle-button,
  .toggle-button.tp-yt-paper-toggle-button {
    background: var(--accent);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
}

/* Recently Played Button */
button.ytmusic-sort-filter-button-renderer {
  color: var(--accent);
  border: var(--button-border);
  background: var(--button-color);
}

ytmusic-multi-select-menu-item-renderer {
  border-radius: var(--select-radius);
  &:hover {
    background: var(--layout-hover);
  }
}

#container.ytmusic-multi-select-menu-renderer {
  background: transparent;
  border: 0;
}

#items.ytmusic-multi-select-menu-renderer {
  background: transparent;
}

#title.ytmusic-multi-select-menu-renderer {
  border: 0;
}

ytmusic-background-promo-renderer {
  background: transparent;
  .yt-icon-shape {
    color: var(--icon);
  }
}

/* Popup Message */
tp-yt-paper-toast,
tp-yt-paper-toast.yt-notification-action-renderer,
#toast.ytmusic-notification-text-renderer {
  background: var(--layout-color);
  border-radius: 8px;
  border: var(--layout-border);
  box-shadow: var(--drop-shadow);
  backdrop-filter: blur(var(--layout-blur));
}

#text.yt-notification-action-renderer,
#sub-text.yt-notification-action-renderer {
  color: var(--text-color-1);
}

.yt-spec-button-shape-next--call-to-action-inverse.yt-spec-button-shape-next--text {
  color: var(--accent);
  &:hover {
    background: var(--button-hover);
  }
}

/* Playlist Page */
ytmusic-play-button-renderer.ytmusic-responsive-header-renderer {
  background: var(--button-color) !important;
  &:hover {
    background: var(--button-hover) !important;
  }
}

.ytmusic-responsive-header-renderer .yt-simple-endpoint:hover {
  background: var(--button-hover);
}

/* Song select Dialog */
ytmusic-multi-select-menu-bar {
  background: transparent;
}

#tooltip {
  background: var(--layout-contrast);
  border-radius: 8px;
}

/* Playlist Visibility Dialog */
.yt-spec-dialog-layout {
  background: transparent;
}

.yt-radio-shape__label-container {
  color: var(--text-color-1);
}

.ytDialogHeaderViewModelText {
  color: var(--text-color-1);
}

.ytRadioButtonItemViewModelSubText {
  color: var(--text-color-2);
}

/* Share Container */
#bar.yt-copy-link-renderer {
  background: var(--layout-contrast);
  border: var(--layout-border);
}

#checkbox.tp-yt-paper-checkbox {
  border-color: var(--button-color);
  background: var(--button-color);
  --paper-checkbox-checked-color: var(--button-color);
}

#checkmark.tp-yt-paper-checkbox {
  border-color: var(--icon);
}

.yt-spec-button-shape-next--call-to-action.yt-spec-button-shape-next--filled {
  color: var(--accent);
  background: var(--button-color);
  &:hover {
    background: var(--button-hover);
  }
}

.scroll-button.yt-third-party-share-target-section-renderer {
  background: var(--button-color);
  backdrop-filter: blur(var(--layout-blur));
  box-shadow: none;
  .yt-icon-shape {
    color: var(--accent);
  }
}

yt-formatted-string.yt-start-at-renderer {
  color: var(--text-color-2);
}

/* Explore Page */
ytmusic-navigation-button-renderer.ytmusic-grid-renderer button.ytmusic-navigation-button-renderer {
  background: var(--button-color);
  border-radius: 12px;
  &:focus-within,
  &:hover {
    background: var(--button-hover);
  }
  .yt-icon-shape {
    color: var(--icon);
  }
}

/*  */
#header.ytmusic-engagement-panel-title-header-renderer,
#content.ytmusic-engagement-panel-section-list-renderer {
  background: transparent;
}

.yt-list-item-view-model__container--tappable:hover {
  background: var(--layout-hover);
}

.yt-spec-button-shape-next--call-to-action.yt-spec-button-shape-next--text {
  color: var(--accent);
  background: var(--button-color);
  border: var(--button-border);
  &:hover {
    background: var(--button-hover);
    border: var(--button-border);
  }
}

yt-card-item-container-renderer {
  border: 0;
}

/* ==========================Artist Page========================== */
ytmusic-immersive-header-renderer {
  background: var(--ytmusic-app);
}

ytmusic-immersive-header-renderer .image {
  margin-left: 0 !important;
  opacity: 0.8;
  filter: brightness(0.95);
}

.description.ytmusic-immersive-header-renderer {
  color: var(--text-color-1);
}

ytmusic-toggle-button-renderer yt-formatted-string.ytmusic-toggle-button-renderer {
  color: var(--accent);
}

ytmusic-immersive-header-renderer[is-description-expanded] .image {
  filter: brightness(0.55);
}

/* Artist Header */
.image.ytmusic-immersive-header-renderer {
  mask-image: linear-gradient(to bottom, black 60%, transparent 100%);
  mask-repeat: no-repeat;
  mask-size: 100%;
}

.ytmusic-browse-response .content-container-wrapper,
.content-container-wrapper .gradient-container {
  background: transparent !important;
}

/* Sub Button */
ytmusic-subscribe-button-renderer {
  --ytmusic-subscribe-button-outline-color: transparent;
  --ytmusic-subscribe-button-color: var(--accent);
  background: var(--button-color);
  border-radius: 18px;
  backdrop-filter: blur(var(--layout-blur));
  border: var(--button-border);
  &:hover {
    background: var(--button-hover);
  }
}

ytmusic-subscribe-button-renderer[is-subscribed] {
  --ytmusic-subscribe-button-outline-color: transparent;
  --ytmusic-subscribe-button-color: var(--text-color-1);
  background: var(--button-color);
  backdrop-filter: blur(var(--layout-blur));
  border: var(--button-border);
  &:hover {
    background: var(--button-hover);
  }
}

/* Unsub Confirm */
ytmusic-popup-container tp-yt-paper-dialog.ytmusic-popup-container.ytmusic-popup-container {
  outline: transparent !important;
}

/* Shuffle and Radio Button */
.yt-spec-button-shape-next--mono.yt-spec-button-shape-next--filled {
  color: var(--accent);
  background: var(--button-color);
  backdrop-filter: blur(var(--layout-blur));
  border: var(--button-border);
  &:hover {
    background: var(--button-hover);
    border: var(--button-border);
  }
}

/* ==========================Podcast========================== */
/* Podcast Header */
ytmusic-visual-header-renderer[has-banner-image] .gradient-container.ytmusic-visual-header-renderer {
  background: transparent;
}

.image.ytmusic-visual-header-renderer {
  mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
  mask-repeat: no-repeat;
  mask-size: 100%;
}

/* Podcast Hover */
.thumbnail-wrapper.ytmusic-multi-row-list-item-renderer {
  position: relative;
  border-radius: var(--small-art-radius);
}

.menu.ytmusic-multi-row-list-item-renderer {
  background: transparent !important;
}

/* Podcast Focused */
ytmusic-multi-row-list-item-renderer[play-button-state] {
  border-radius: var(--big-select-radius);
}

/* Progress Bar */
.foreground-bar.ytmusic-playback-progress-renderer {
  background: var(--accent);
}

.subtitle.ytmusic-multi-row-list-item-renderer {
  color: var(--text-color-2);
}

/* ==========================Mobile View========================== */
ytmusic-player-page[is-mweb-modernization-enabled] #main-panel::before {
  content: "";
  position: fixed;
  inset: -5rem;
  background: if($background == dynamic, var(--blyrics-background-img), $background);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  z-index: -50;
  opacity: 1;
  filter: blur(30px) brightness(var(--bg-brightness));
}

ytmusic-player-page[is-mweb-modernization-enabled][player-page-ui-state] #side-panel.ytmusic-player-page {
  height: 100vh;
  background: transparent;
}

ytmusic-player-page #top-player-bar {
  background: transparent;
  z-index: 1;
  backdrop-filter: none;
}

@media (max-width: 615px) {
  .blyrics-container:before,
  .blyrics-container:after {
    opacity: 0;
  }

  /* Overlay Over Lyrics Background */
  #tab-renderer {
    background: linear-gradient(transparent, rgba(0, 0, 0, .5));
  }
}

.play-pause-button-wrapper {
  color: transparent;
  background: transparent !important;
  transform: scale(1.2);
  will-change: transform;
  transition: transform 0.3s ease;
  &:hover {
    transform: scale(1.4);
  }
}

.next-button.ytmusic-player-controls,
.previous-button.ytmusic-player-controls,
.shuffle.ytmusic-player-controls,
.repeat.ytmusic-player-controls {
  color: transparent;
  background: transparent !important;
  will-change: transform;
  transition: transform 0.3s ease;
  &:hover {
    background: transparent;
    transform: scale(1.2);
  }
}

/* Lyrics Tab Opening Transition */
ytmusic-player-page[is-mweb-modernization-enabled] #main-panel {
  transform: none !important;
}

ytmusic-player-page[is-mweb-modernization-enabled][transition-mode] #side-panel {
  transition: transform .55s cubic-bezier(.3, .6, .5, 1);
}

ytmusic-player-page[is-mweb-modernization-enabled][player-page-ui-state="TABS_VIEW"] {
  .av, #info-panel, #player-controls, .collapse-button, .context-menu-button {
    opacity: 0;
    transform: translateY(var(--ytmusic-player-page-player-bar-height));
    transition: opacity 0.3s ease-out, transform 0.3s ease-out;
    will-change: opacity, transform;
  }
}

ytmusic-player-page[is-mweb-modernization-enabled][player-page-ui-state="FULL_PLAYER_VIEW"] {
  .av, #info-panel, #player-controls, .collapse-button, .context-menu-button {
    transition: opacity 0.3s ease-in, transform 0.3s ease-in;
  }
}

ytmusic-player-page[player-page-ui-state="TABS_VIEW"] #thumbnail > img {
  border-radius: 5rem;
  transition: border-radius 0.3s ease-out;
}

ytmusic-player-page[is-mweb-modernization-enabled][player-page-ui-state="TABS_VIEW"] #music-player-wrapper {
  transform: translateY(6.5rem);
  transition: transform 0.3s ease-in-out;
}

/* ==========================Better Lyrics Extension========================== */
.blyrics-container span {
  font-family: $font !important;
  font-size: $lyrics-font-size;
  font-weight: $lyrics-font-weight !important;
}

#blyrics-loader {
  transition: height 0.5s ease-in-out, opacity 0.5s ease-in-out, padding-top 0.5s ease-in-out;
}

@if $unified-artists-lines == on {
  .blyrics--line[data-agent="v2"],
  .blyrics--line[data-agent="v3"],
  .blyrics--line[data-agent="v1000"] {
    justify-content: start;
    transform-origin: left center !important;
  }
}

.blyrics-footer__discord,
.autoscroll-resume-button,
.blyrics-footer__container {
  --blyrics-discord-hover-color: var(--accent);
  opacity: 0.5;
  background: var(--button-color);
  border: var(--layout-border);
  backdrop-filter: blur(var(--layout-blur));
  transition: background 0.3s ease-in, opacity 0.3s ease-in;
  &:hover {
    opacity: 1;
  }
}

@if $small-video == on {
  :root {
    --blyrics-fullscreen-video-panel-size: 58%;
  }

  #side-panel {
    min-width: 50%;
  }

  ytmusic-player[player-ui-state="FULLSCREEN"] {
    position: relative !important;
  }

  ytmusic-player-page:not([is-mweb-modernization-enabled])[video-mode] .side-panel.ytmusic-player-page {
    margin: 0 0 0 var(--ytmusic-player-page-content-gap);
  }
}

/* Center Player When No Lyrics */
ytmusic-player-page[player-fullscreened]:not([video-mode]):not([blyrics-dfs]):has(.blyrics-container[data-no-lyrics="true"]) #main-panel {
  transform: translateX(calc(50vw - 50% - var(--ytmusic-guide-width) - var(--ytmusic-player-page-horizontal-padding)));
  transition: transform 0.3s ease-in-out;
  transition-delay: var(--no-lyrics-slide-delay);
}

ytmusic-player-page[player-fullscreened][video-mode]:not([blyrics-dfs]):has(.blyrics-container[data-no-lyrics="true"]) #main-panel {
  transform: translateX(calc(50vw - 50% - var(--ytmusic-guide-width) - var(--ytmusic-player-page-horizontal-padding) / 2));
  transition: transform 0.3s ease-in-out;
  transition-delay: var(--no-lyrics-slide-delay);
}

ytmusic-player-page[player-fullscreened]:not([video-mode]):not([blyrics-dfs]):has(.blyrics-container[data-no-lyrics="true"]) #player {
  max-width: 500px !important;
  transition: max-width 0.5s ease-in-out;
  transition-delay: var(--no-lyrics-slide-delay);
}

ytmusic-player-page[player-fullscreened]:not([blyrics-dfs]) #blyrics-wrapper:has(.blyrics-container[data-no-lyrics="true"]) {
  transition: opacity 0.3s ease;
  transition-delay: var(--no-lyrics-slide-delay);
}
